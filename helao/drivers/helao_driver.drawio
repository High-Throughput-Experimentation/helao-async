<mxfile host="65bd71144e">
    <diagram id="UCgfB4eMcKTBTghjKcvr" name="Page-1">
        <mxGraphModel dx="839" dy="654" grid="1" gridSize="10" guides="1" tooltips="1" connect="1" arrows="1" fold="1" page="1" pageScale="1" pageWidth="1100" pageHeight="850" math="0" shadow="0">
            <root>
                <mxCell id="0"/>
                <mxCell id="1" parent="0"/>
                <mxCell id="3" value="" style="rounded=1;whiteSpace=wrap;html=1;" parent="1" vertex="1">
                    <mxGeometry x="70" y="170" width="600" height="480" as="geometry"/>
                </mxCell>
                <mxCell id="6" value="&lt;b style=&quot;font-size: 20px;&quot;&gt;&lt;font style=&quot;font-size: 20px;&quot;&gt;ORCH (Orchestrator)&lt;br&gt;&lt;/font&gt;&lt;/b&gt;&lt;font size=&quot;1&quot;&gt;&lt;b&gt;&lt;font style=&quot;font-size: 12px;&quot;&gt;helao.servers.orchestrator.async_orch2.makeApp() -&amp;gt; helao.servers.orch_api.OrchAPI&lt;/font&gt;&lt;/b&gt;&lt;/font&gt;" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontStyle=0" parent="1" vertex="1">
                    <mxGeometry x="70" y="180" width="600" height="40" as="geometry"/>
                </mxCell>
                <mxCell id="7" value="" style="rounded=1;whiteSpace=wrap;html=1;" parent="1" vertex="1">
                    <mxGeometry x="870" y="170" width="600" height="480" as="geometry"/>
                </mxCell>
                <mxCell id="11" value="&lt;b&gt;&lt;font style=&quot;font-size: 20px;&quot;&gt;PSTAT (Action server)&lt;br&gt;&lt;/font&gt;&lt;/b&gt;&lt;font style=&quot;font-size: 12px;&quot;&gt;&lt;b&gt;&lt;font style=&quot;font-size: 12px;&quot;&gt;helao.servers.action.gamry_server2.makeApp() -&amp;gt; helao.servers.base_api.BaseAPI&lt;/font&gt;&lt;/b&gt;&lt;b&gt;&lt;font style=&quot;font-size: 12px;&quot;&gt;&lt;br&gt;&lt;/font&gt;&lt;/b&gt;&lt;/font&gt;" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;" parent="1" vertex="1">
                    <mxGeometry x="870" y="180" width="600" height="40" as="geometry"/>
                </mxCell>
                <mxCell id="38" value="POST request" style="edgeStyle=none;html=1;exitX=1;exitY=0.5;exitDx=0;exitDy=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;labelBackgroundColor=none;fontSize=10;verticalAlign=top;strokeColor=#FF00FF;strokeWidth=2;" parent="1" source="14" target="29" edge="1">
                    <mxGeometry x="-0.0012" relative="1" as="geometry">
                        <mxPoint as="offset"/>
                    </mxGeometry>
                </mxCell>
                <mxCell id="97" style="edgeStyle=none;html=1;exitX=0;exitY=0.5;exitDx=0;exitDy=0;entryX=0.25;entryY=0;entryDx=0;entryDy=0;fontSize=12;strokeColor=#00FFFF;strokeWidth=2;" edge="1" parent="1" source="14" target="15">
                    <mxGeometry relative="1" as="geometry">
                        <Array as="points">
                            <mxPoint x="375" y="280"/>
                        </Array>
                    </mxGeometry>
                </mxCell>
                <mxCell id="14" value="Driver heartbeat&lt;br&gt;&lt;i&gt;coroutine&lt;/i&gt;" style="shape=process;whiteSpace=wrap;html=1;backgroundOutline=1;fillColor=#dae8fc;strokeColor=#6c8ebf;" parent="1" vertex="1">
                    <mxGeometry x="510" y="250" width="120" height="60" as="geometry"/>
                </mxCell>
                <mxCell id="39" value="POST request" style="edgeStyle=none;html=1;exitX=0.75;exitY=0;exitDx=0;exitDy=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;labelBackgroundColor=none;fontSize=10;verticalAlign=top;strokeColor=#FF00FF;strokeWidth=2;" parent="1" source="15" target="28" edge="1">
                    <mxGeometry x="0.6087" relative="1" as="geometry">
                        <mxPoint as="offset"/>
                        <Array as="points">
                            <mxPoint x="435" y="360"/>
                        </Array>
                    </mxGeometry>
                </mxCell>
                <mxCell id="15" value="Dispatch loop&lt;br&gt;&lt;i&gt;coroutine&lt;br&gt;&lt;/i&gt;" style="shape=process;whiteSpace=wrap;html=1;backgroundOutline=1;fillColor=#dae8fc;strokeColor=#6c8ebf;" parent="1" vertex="1">
                    <mxGeometry x="345" y="415" width="120" height="60" as="geometry"/>
                </mxCell>
                <mxCell id="68" style="edgeStyle=none;html=1;exitX=0.5;exitY=0.88;exitDx=0;exitDy=0;exitPerimeter=0;entryX=0.5;entryY=0;entryDx=0;entryDy=0;entryPerimeter=0;strokeColor=#FF00FF;strokeWidth=2;" parent="1" source="17" target="65" edge="1">
                    <mxGeometry relative="1" as="geometry"/>
                </mxCell>
                <mxCell id="17" value="Experiment&lt;br&gt;queue" style="strokeWidth=1;html=1;shape=mxgraph.flowchart.multi-document;whiteSpace=wrap;fillColor=#e1d5e7;strokeColor=#9673a6;" parent="1" vertex="1">
                    <mxGeometry x="180" y="330" width="120" height="60" as="geometry"/>
                </mxCell>
                <mxCell id="25" value="Gamry driver&lt;br&gt;instance" style="rounded=1;whiteSpace=wrap;html=1;strokeWidth=1;fillColor=#f8cecc;strokeColor=#b85450;" parent="1" vertex="1">
                    <mxGeometry x="1035" y="530" width="120" height="60" as="geometry"/>
                </mxCell>
                <mxCell id="64" value="POST request" style="edgeStyle=none;html=1;exitX=1;exitY=0.75;exitDx=0;exitDy=0;entryX=1;entryY=0.5;entryDx=0;entryDy=0;verticalAlign=top;strokeColor=#00FFFF;strokeWidth=2;" parent="1" source="46" target="63" edge="1">
                    <mxGeometry x="0.6903" relative="1" as="geometry">
                        <Array as="points">
                            <mxPoint x="1220" y="415"/>
                            <mxPoint x="1220" y="610"/>
                            <mxPoint x="780" y="610"/>
                            <mxPoint x="780" y="540"/>
                        </Array>
                        <mxPoint as="offset"/>
                    </mxGeometry>
                </mxCell>
                <mxCell id="89" style="edgeStyle=none;html=1;exitX=1;exitY=0.5;exitDx=0;exitDy=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;fontSize=12;strokeColor=#FF00FF;strokeWidth=2;" edge="1" parent="1" source="46" target="79">
                    <mxGeometry relative="1" as="geometry">
                        <Array as="points">
                            <mxPoint x="1240" y="360"/>
                            <mxPoint x="1240" y="490"/>
                        </Array>
                    </mxGeometry>
                </mxCell>
                <mxCell id="106" style="edgeStyle=none;html=1;exitX=1;exitY=0.25;exitDx=0;exitDy=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;strokeColor=#FF00FF;strokeWidth=2;fontSize=12;" edge="1" parent="1" source="46" target="76">
                    <mxGeometry relative="1" as="geometry"/>
                </mxCell>
                <mxCell id="46" value="Active action instance" style="rounded=1;whiteSpace=wrap;html=1;strokeWidth=1;verticalAlign=top;fillColor=#d5e8d4;strokeColor=#82b366;dashed=1;" parent="1" vertex="1">
                    <mxGeometry x="1005" y="250" width="180" height="220" as="geometry"/>
                </mxCell>
                <mxCell id="43" value="connect" style="edgeStyle=none;html=1;exitX=0.25;exitY=1;exitDx=0;exitDy=0;entryX=0.25;entryY=0;entryDx=0;entryDy=0;labelBackgroundColor=none;fontSize=10;horizontal=0;verticalAlign=bottom;strokeColor=#FF00FF;strokeWidth=2;" parent="1" source="26" target="25" edge="1">
                    <mxGeometry relative="1" as="geometry"/>
                </mxCell>
                <mxCell id="44" value="measure" style="edgeStyle=none;html=1;exitX=0.5;exitY=1;exitDx=0;exitDy=0;entryX=0.5;entryY=0;entryDx=0;entryDy=0;labelBackgroundColor=none;fontSize=10;horizontal=0;verticalAlign=bottom;strokeColor=#FF00FF;strokeWidth=2;" parent="1" source="26" target="25" edge="1">
                    <mxGeometry relative="1" as="geometry"/>
                </mxCell>
                <mxCell id="45" value="disconnect" style="edgeStyle=none;html=1;exitX=0.75;exitY=1;exitDx=0;exitDy=0;entryX=0.75;entryY=0;entryDx=0;entryDy=0;labelBackgroundColor=none;fontSize=10;horizontal=0;verticalAlign=bottom;strokeColor=#FF00FF;strokeWidth=2;" parent="1" source="26" target="25" edge="1">
                    <mxGeometry relative="1" as="geometry"/>
                </mxCell>
                <mxCell id="26" value="action_loop_task&lt;br&gt;&lt;i&gt;coroutine&lt;/i&gt;" style="shape=process;whiteSpace=wrap;html=1;backgroundOutline=1;strokeWidth=1;fillColor=#dae8fc;strokeColor=#6c8ebf;" parent="1" vertex="1">
                    <mxGeometry x="1035" y="380" width="120" height="60" as="geometry"/>
                </mxCell>
                <mxCell id="41" style="edgeStyle=none;html=1;exitX=1;exitY=0.5;exitDx=0;exitDy=0;labelBackgroundColor=none;fontSize=10;entryX=0;entryY=0.5;entryDx=0;entryDy=0;strokeColor=#FF00FF;strokeWidth=2;" parent="1" source="28" target="46" edge="1">
                    <mxGeometry relative="1" as="geometry"/>
                </mxCell>
                <mxCell id="28" value="/PSTAT/run_CV&lt;br&gt;&lt;i&gt;endpoint&lt;/i&gt;" style="rounded=0;whiteSpace=wrap;html=1;strokeWidth=1;fillColor=#fff2cc;strokeColor=#d6b656;" parent="1" vertex="1">
                    <mxGeometry x="810" y="340" width="120" height="40" as="geometry"/>
                </mxCell>
                <mxCell id="42" style="edgeStyle=none;html=1;exitX=1;exitY=0.5;exitDx=0;exitDy=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;labelBackgroundColor=none;fontSize=10;strokeColor=#FF00FF;strokeWidth=2;" parent="1" source="29" target="25" edge="1">
                    <mxGeometry relative="1" as="geometry">
                        <Array as="points">
                            <mxPoint x="970" y="280"/>
                            <mxPoint x="970" y="560"/>
                        </Array>
                    </mxGeometry>
                </mxCell>
                <mxCell id="29" value="/get_status&lt;br&gt;&lt;i&gt;endpoint&lt;/i&gt;" style="rounded=0;whiteSpace=wrap;html=1;strokeWidth=1;fillColor=#fff2cc;strokeColor=#d6b656;" parent="1" vertex="1">
                    <mxGeometry x="810" y="260" width="120" height="40" as="geometry"/>
                </mxCell>
                <mxCell id="48" value="HEAD request" style="edgeStyle=none;html=1;exitX=1;exitY=0.5;exitDx=0;exitDy=0;entryX=0.25;entryY=1;entryDx=0;entryDy=0;labelBackgroundColor=none;fontSize=10;verticalAlign=top;strokeColor=#FF00FF;strokeWidth=2;" parent="1" source="30" target="28" edge="1">
                    <mxGeometry x="-0.322" relative="1" as="geometry">
                        <Array as="points">
                            <mxPoint x="840" y="445"/>
                        </Array>
                        <mxPoint as="offset"/>
                    </mxGeometry>
                </mxCell>
                <mxCell id="99" style="edgeStyle=none;html=1;exitX=0;exitY=0.5;exitDx=0;exitDy=0;fontSize=12;strokeColor=#00FFFF;strokeWidth=2;" edge="1" parent="1" source="30" target="15">
                    <mxGeometry relative="1" as="geometry"/>
                </mxCell>
                <mxCell id="30" value="Active action heartbeat&lt;br&gt;&lt;i&gt;coroutine&lt;/i&gt;" style="shape=process;whiteSpace=wrap;html=1;backgroundOutline=1;fillColor=#dae8fc;strokeColor=#6c8ebf;" parent="1" vertex="1">
                    <mxGeometry x="510" y="415" width="120" height="60" as="geometry"/>
                </mxCell>
                <UserObject label="LOGS/PSTAT.log" id="31">
                    <mxCell style="shape=cylinder3;whiteSpace=wrap;html=1;boundedLbl=1;backgroundOutline=1;size=15;strokeWidth=1;" parent="1" vertex="1">
                        <mxGeometry x="1110" y="750" width="120" height="80" as="geometry"/>
                    </mxCell>
                </UserObject>
                <mxCell id="32" value="LOGS/ORCH.log" style="shape=cylinder3;whiteSpace=wrap;html=1;boundedLbl=1;backgroundOutline=1;size=15;strokeWidth=1;" parent="1" vertex="1">
                    <mxGeometry x="315" y="750" width="110" height="80" as="geometry"/>
                </mxCell>
                <mxCell id="37" value="TimedRotatingFileHandler" style="edgeStyle=none;html=1;exitX=0.5;exitY=1;exitDx=0;exitDy=0;entryX=0.5;entryY=0;entryDx=0;entryDy=0;entryPerimeter=0;labelBackgroundColor=default;fontSize=10;strokeColor=#FF00FF;strokeWidth=2;" parent="1" source="33" target="31" edge="1">
                    <mxGeometry relative="1" as="geometry"/>
                </mxCell>
                <mxCell id="33" value="PSTAT logger instance" style="rounded=1;whiteSpace=wrap;html=1;strokeWidth=1;fillColor=#f8cecc;strokeColor=#b85450;" parent="1" vertex="1">
                    <mxGeometry x="1110" y="620" width="120" height="60" as="geometry"/>
                </mxCell>
                <mxCell id="35" value="&lt;font style=&quot;font-size: 10px;&quot;&gt;TimedRotatingFileHandler&lt;/font&gt;" style="edgeStyle=none;html=1;exitX=0.5;exitY=1;exitDx=0;exitDy=0;entryX=0.5;entryY=0;entryDx=0;entryDy=0;entryPerimeter=0;strokeColor=#FF00FF;strokeWidth=2;" parent="1" source="34" target="32" edge="1">
                    <mxGeometry relative="1" as="geometry">
                        <mxPoint as="offset"/>
                    </mxGeometry>
                </mxCell>
                <mxCell id="34" value="ORCH logger instance" style="rounded=1;whiteSpace=wrap;html=1;strokeWidth=1;fillColor=#f8cecc;strokeColor=#b85450;" parent="1" vertex="1">
                    <mxGeometry x="310" y="620" width="120" height="60" as="geometry"/>
                </mxCell>
                <mxCell id="52" value="&lt;h1&gt;&lt;font style=&quot;font-size: 16px;&quot;&gt;Driver heartbeat&lt;/font&gt;&lt;/h1&gt;&lt;div&gt;&lt;i&gt;helao.servers.orch.action_server_monitor()&lt;/i&gt;&lt;/div&gt;&lt;p&gt;The 'driver heartbeat' is an async coroutine running on ORCH which issues a /get_status POST request every 10 seconds to all action servers defined in the launch config, regardless of ORCH and action server state.&lt;br&gt;&lt;/p&gt;" style="text;html=1;strokeColor=#666666;fillColor=#f5f5f5;spacing=5;spacingTop=-20;whiteSpace=wrap;overflow=hidden;rounded=0;strokeWidth=1;fontSize=10;labelBackgroundColor=none;fontColor=#333333;" parent="1" vertex="1">
                    <mxGeometry x="630" y="10" width="230" height="140" as="geometry"/>
                </mxCell>
                <mxCell id="53" value="&lt;h1&gt;&lt;font style=&quot;font-size: 16px;&quot;&gt;Active action heartbeat&lt;/font&gt;&lt;/h1&gt;&lt;div&gt;helao.servers.orch.active_action_monitor()&lt;br&gt;&lt;/div&gt;&lt;p&gt;This coroutine makes a lightweight HEAD request to active (running) action endpoints every 10 seconds, to check if the action servers are still responding to API requests.&lt;br&gt;&lt;/p&gt;" style="text;html=1;strokeColor=#666666;fillColor=#f5f5f5;spacing=5;spacingTop=-20;whiteSpace=wrap;overflow=hidden;rounded=0;strokeWidth=1;fontSize=10;labelBackgroundColor=none;fontColor=#333333;" parent="1" vertex="1">
                    <mxGeometry x="70" y="670" width="220" height="140" as="geometry"/>
                </mxCell>
                <mxCell id="54" value="&lt;h1&gt;&lt;font style=&quot;font-size: 16px;&quot;&gt;Seq/Exp/Act Queues&lt;/font&gt;&lt;/h1&gt;&lt;div&gt;&lt;i&gt;helao.servers.orch.sequence_dq, .experiment_dq, .action_dq&lt;/i&gt;&lt;br&gt;&lt;/div&gt;&lt;p&gt;Sequence, experiment, and action queues are instances of 'zdeque', a custom implementation of collections.deque which wraps queue insert/append/appendleft/pop/popleft methods with zstd compression.&lt;/p&gt;" style="text;html=1;strokeColor=#666666;fillColor=#f5f5f5;spacing=5;spacingTop=-20;whiteSpace=wrap;overflow=hidden;rounded=0;strokeWidth=1;fontSize=10;labelBackgroundColor=none;fontColor=#333333;" parent="1" vertex="1">
                    <mxGeometry x="70" y="10" width="280" height="140" as="geometry"/>
                </mxCell>
                <mxCell id="55" value="&lt;h1&gt;&lt;font style=&quot;font-size: 16px;&quot;&gt;Dispatch loop&lt;/font&gt;&lt;/h1&gt;&lt;div&gt;&lt;i&gt;helao.servers.orch.dispatch_loop_task()&lt;/i&gt;&lt;br&gt;&lt;/div&gt;&lt;p&gt;Serially processes queued actions (actions unpacked from experiment, experiments unpacked from sequence) by checking for action start conditions and sending POST request to respective action servers.&lt;br&gt;&lt;/p&gt;" style="text;html=1;strokeColor=#666666;fillColor=#f5f5f5;spacing=5;spacingTop=-20;whiteSpace=wrap;overflow=hidden;rounded=0;strokeWidth=1;fontSize=10;labelBackgroundColor=none;fontColor=#333333;" parent="1" vertex="1">
                    <mxGeometry x="370" y="10" width="240" height="140" as="geometry"/>
                </mxCell>
                <mxCell id="56" value="&lt;h1&gt;&lt;font style=&quot;font-size: 16px;&quot;&gt;Logger instance&lt;/font&gt;&lt;/h1&gt;&lt;div&gt;helao.helpers.logging.make_logger() -&amp;gt; logging.Logger&lt;br&gt;&lt;/div&gt;&lt;p&gt;An instance returned by logging.getLogger() which is created by the server process launch script, then inherited by all modules loaded in the same process.&lt;br&gt;&lt;/p&gt;" style="text;html=1;strokeColor=#666666;fillColor=#f5f5f5;spacing=5;spacingTop=-20;whiteSpace=wrap;overflow=hidden;rounded=0;strokeWidth=1;fontSize=10;labelBackgroundColor=none;fontColor=#333333;" parent="1" vertex="1">
                    <mxGeometry x="1250" y="670" width="220" height="140" as="geometry"/>
                </mxCell>
                <mxCell id="57" value="&lt;h1&gt;&lt;font style=&quot;font-size: 16px;&quot;&gt;Endpoints&lt;/font&gt;&lt;/h1&gt;&lt;div&gt;&lt;i&gt;helao.servers.base_api, helao.servers.orch_api&lt;/i&gt;&lt;br&gt;&lt;/div&gt;&lt;p&gt;Endpoints are the API methods exposed to action server clients (e.g. ORCH). An action endpoint path is prefixed by the action server name (/PSTAT/) whereas a &quot;private&quot; endpoint path is not. Action endpoints are tracked by ORCH to determine action start conditions. All action servers inherit BaseAPI endpoints in addition to their device/resource specific endpoints.&lt;br&gt;&lt;/p&gt;" style="text;html=1;strokeColor=#666666;fillColor=#f5f5f5;spacing=5;spacingTop=-20;whiteSpace=wrap;overflow=hidden;rounded=0;strokeWidth=1;fontSize=10;labelBackgroundColor=none;fontColor=#333333;" parent="1" vertex="1">
                    <mxGeometry x="880" y="10" width="360" height="140" as="geometry"/>
                </mxCell>
                <mxCell id="58" value="&lt;h1&gt;&lt;font style=&quot;font-size: 16px;&quot;&gt;Active action instance&lt;/font&gt;&lt;/h1&gt;&lt;div&gt;&lt;i&gt;helao.servers.base.Active&lt;/i&gt;&lt;br&gt;&lt;/div&gt;&lt;p&gt;The active action instance handles file writing, pushes data and status messages to broadcast queues, and spawns the &quot;action loop&quot; coroutine for processing an Executor task.&lt;br&gt;&lt;/p&gt;" style="text;html=1;strokeColor=#666666;fillColor=#f5f5f5;spacing=5;spacingTop=-20;whiteSpace=wrap;overflow=hidden;rounded=0;strokeWidth=1;fontSize=10;labelBackgroundColor=none;fontColor=#333333;" parent="1" vertex="1">
                    <mxGeometry x="1260" y="10" width="210" height="140" as="geometry"/>
                </mxCell>
                <mxCell id="59" value="&lt;h1&gt;&lt;font style=&quot;font-size: 16px;&quot;&gt;Executor instance&lt;/font&gt;&lt;br&gt;&lt;/h1&gt;&lt;p&gt;&lt;i&gt;helao.helpers.executor.Executor&lt;/i&gt;&lt;br&gt;&lt;/p&gt;&lt;p&gt;An execution base class containing 5 standardized methods which use driver functions to perform an operation:&lt;/p&gt;&lt;ul&gt;&lt;li&gt;_pre_exec()&amp;nbsp; # setup methods&lt;br&gt;&lt;/li&gt;&lt;li&gt;_exec()&amp;nbsp; # perform action&lt;br&gt;&lt;/li&gt;&lt;li&gt;_poll()&amp;nbsp; # retrieve data and update iter count/time&lt;br&gt;&lt;/li&gt;&lt;li&gt;_post_exec()&amp;nbsp; # clean-up methods&lt;br&gt;&lt;/li&gt;&lt;li&gt;_manual_stop()&amp;nbsp; # interrupt a polling executor&lt;br&gt;&lt;/li&gt;&lt;/ul&gt;&lt;div&gt;Implementation is handled by the inheriting executor subclass (e.g. &lt;i&gt;helao.servers.action.gamry_server2.GamryExecutor&lt;/i&gt;). All 5 standard methods are optional. The active action instance will launch &lt;i&gt;helao.base.Base.action_loop_task()&lt;/i&gt; to process the 5 standard methods in order.&lt;br&gt;&lt;/div&gt;" style="text;html=1;strokeColor=#666666;fillColor=#f5f5f5;spacing=5;spacingTop=-20;whiteSpace=wrap;overflow=hidden;rounded=0;strokeWidth=1;fontSize=10;labelBackgroundColor=none;fontColor=#333333;" parent="1" vertex="1">
                    <mxGeometry x="1560" y="175" width="290" height="280" as="geometry"/>
                </mxCell>
                <mxCell id="60" value="&lt;h1&gt;&lt;font style=&quot;font-size: 16px;&quot;&gt;Driver instance&lt;/font&gt;&lt;br&gt;&lt;/h1&gt;&lt;p&gt;&lt;i&gt;helao.drivers.helao_driver.HelaoDriver&lt;/i&gt;&lt;br&gt;&lt;/p&gt;&lt;p&gt;An instance of a subclass of HelaoDriver, an abstract base class which defines the minimum functionality needed by external driver consumers (e.g. get_status endpoint, executors). all &quot;external&quot; HelaoDriver methods return a DriverResponse object:&lt;/p&gt;&lt;ul&gt;&lt;li&gt;connect()&amp;nbsp; # open a connection to device/resource&lt;br&gt;&lt;/li&gt;&lt;li&gt;get_status()&amp;nbsp; # return device/resource status&lt;br&gt;&lt;/li&gt;&lt;li&gt;stop()&amp;nbsp; # interrupt a running driver method&lt;br&gt;&lt;/li&gt;&lt;li&gt;reset()&amp;nbsp; # reinitialize driver connection&lt;br&gt;&lt;/li&gt;&lt;li&gt;disconnect()&amp;nbsp; # release connection&lt;br&gt;&lt;/li&gt;&lt;/ul&gt;Implementation is handled by the inheriting driver subclass (e.g. &lt;i&gt;helao.drivers.pstat.gamry.driver.GamryDriver&lt;/i&gt;). HelaoDriver may be used outside of an action server, so it is recommended to write async consumers of driver methods in a separate module." style="text;html=1;strokeColor=#666666;fillColor=#f5f5f5;spacing=5;spacingTop=-20;whiteSpace=wrap;overflow=hidden;rounded=0;strokeWidth=1;fontSize=10;labelBackgroundColor=none;fontColor=#333333;" parent="1" vertex="1">
                    <mxGeometry x="1560" y="475" width="290" height="310" as="geometry"/>
                </mxCell>
                <mxCell id="61" value="Bokeh Operator&lt;i&gt;&lt;br&gt;&lt;span style=&quot;font-weight: normal;&quot;&gt;&lt;/span&gt;&lt;span style=&quot;font-weight: normal;&quot;&gt;&lt;/span&gt;&lt;/i&gt;" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#f8cecc;strokeColor=#b85450;verticalAlign=middle;fontStyle=1" parent="1" vertex="1">
                    <mxGeometry x="180" y="510" width="120" height="60" as="geometry"/>
                </mxCell>
                <mxCell id="62" value="&lt;h1&gt;&lt;font style=&quot;font-size: 16px;&quot;&gt;Operator&lt;/font&gt;&lt;/h1&gt;&lt;div&gt;&lt;i&gt;helao.servers.operator.bokeh_operator.BokehOperator&lt;/i&gt;&lt;br&gt;&lt;/div&gt;&lt;p&gt;The default Helao operator is a Bokeh visualization app launched on the same event loop as the Orchestrator. BokehOperator handles parameter entry, sequence/experiment queuing, issuing start/stop/estop to the Orch dispatch loop, monitoring queue progress, and monitoring overall orchestration status.&lt;br&gt;&lt;/p&gt;&lt;p&gt;External operators may be implemented as consumers of the Orch API endpoints (e.g. &lt;i&gt;helao.servers.operator.gcld_operator&lt;/i&gt;).&lt;br&gt;&lt;/p&gt;" style="text;html=1;strokeColor=#666666;fillColor=#f5f5f5;spacing=5;spacingTop=-20;whiteSpace=wrap;overflow=hidden;rounded=0;strokeWidth=1;fontSize=10;labelBackgroundColor=none;fontColor=#333333;" parent="1" vertex="1">
                    <mxGeometry x="450" y="670" width="500" height="140" as="geometry"/>
                </mxCell>
                <mxCell id="91" style="edgeStyle=none;html=1;exitX=0;exitY=0.5;exitDx=0;exitDy=0;entryX=1;entryY=0.5;entryDx=0;entryDy=0;fontSize=12;strokeColor=#00FFFF;strokeWidth=2;" edge="1" parent="1" source="63" target="75">
                    <mxGeometry relative="1" as="geometry"/>
                </mxCell>
                <mxCell id="63" value="/update_status&lt;br&gt;&lt;i&gt;endpoint&lt;/i&gt;" style="rounded=0;whiteSpace=wrap;html=1;strokeWidth=1;fillColor=#fff2cc;strokeColor=#d6b656;" parent="1" vertex="1">
                    <mxGeometry x="610" y="520" width="120" height="40" as="geometry"/>
                </mxCell>
                <mxCell id="69" style="edgeStyle=none;html=1;exitX=1;exitY=0.5;exitDx=0;exitDy=0;exitPerimeter=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;strokeColor=#FF00FF;strokeWidth=2;" parent="1" source="65" target="15" edge="1">
                    <mxGeometry relative="1" as="geometry"/>
                </mxCell>
                <mxCell id="65" value="Action&lt;br&gt;queue" style="strokeWidth=1;html=1;shape=mxgraph.flowchart.multi-document;whiteSpace=wrap;fillColor=#e1d5e7;strokeColor=#9673a6;" parent="1" vertex="1">
                    <mxGeometry x="180" y="415" width="120" height="60" as="geometry"/>
                </mxCell>
                <mxCell id="67" style="edgeStyle=none;html=1;exitX=0.5;exitY=0.88;exitDx=0;exitDy=0;exitPerimeter=0;entryX=0.5;entryY=0;entryDx=0;entryDy=0;entryPerimeter=0;strokeColor=#FF00FF;strokeWidth=2;" parent="1" source="66" target="17" edge="1">
                    <mxGeometry relative="1" as="geometry">
                        <mxPoint x="240" y="320" as="targetPoint"/>
                    </mxGeometry>
                </mxCell>
                <mxCell id="66" value="Sequence&lt;br&gt;queue" style="strokeWidth=1;html=1;shape=mxgraph.flowchart.multi-document;whiteSpace=wrap;fillColor=#e1d5e7;strokeColor=#9673a6;" parent="1" vertex="1">
                    <mxGeometry x="180" y="250" width="120" height="60" as="geometry"/>
                </mxCell>
                <mxCell id="71" style="edgeStyle=none;html=1;exitX=1;exitY=0.5;exitDx=0;exitDy=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;entryPerimeter=0;strokeColor=#FF00FF;strokeWidth=2;" parent="1" source="70" target="66" edge="1">
                    <mxGeometry relative="1" as="geometry"/>
                </mxCell>
                <mxCell id="70" value="/append_sequence&lt;br&gt;&lt;i&gt;endpoint&lt;/i&gt;" style="rounded=0;whiteSpace=wrap;html=1;strokeWidth=1;fillColor=#fff2cc;strokeColor=#d6b656;" parent="1" vertex="1">
                    <mxGeometry x="10" y="260" width="120" height="40" as="geometry"/>
                </mxCell>
                <mxCell id="72" value="/start&lt;br&gt;&lt;i&gt;endpoint&lt;/i&gt;" style="rounded=0;whiteSpace=wrap;html=1;strokeWidth=1;fillColor=#fff2cc;strokeColor=#d6b656;" parent="1" vertex="1">
                    <mxGeometry x="10" y="340" width="120" height="40" as="geometry"/>
                </mxCell>
                <mxCell id="73" value="/stop&lt;br&gt;&lt;i&gt;endpoint&lt;/i&gt;" style="rounded=0;whiteSpace=wrap;html=1;strokeWidth=1;fillColor=#fff2cc;strokeColor=#d6b656;" parent="1" vertex="1">
                    <mxGeometry x="10" y="420" width="120" height="40" as="geometry"/>
                </mxCell>
                <mxCell id="74" value="/estop&lt;br&gt;&lt;i&gt;endpoint&lt;/i&gt;" style="rounded=0;whiteSpace=wrap;html=1;strokeWidth=1;fillColor=#fff2cc;strokeColor=#d6b656;" parent="1" vertex="1">
                    <mxGeometry x="10" y="500" width="120" height="40" as="geometry"/>
                </mxCell>
                <mxCell id="100" style="edgeStyle=none;html=1;exitX=0.5;exitY=0;exitDx=0;exitDy=0;fontSize=12;strokeColor=#00FFFF;strokeWidth=2;" edge="1" parent="1" source="75" target="15">
                    <mxGeometry relative="1" as="geometry"/>
                </mxCell>
                <mxCell id="103" style="edgeStyle=none;html=1;exitX=0;exitY=0.5;exitDx=0;exitDy=0;strokeColor=#00FFFF;fontSize=12;strokeWidth=2;" edge="1" parent="1" source="75" target="61">
                    <mxGeometry relative="1" as="geometry"/>
                </mxCell>
                <mxCell id="75" value="Global status&lt;br&gt;&lt;i&gt;dict&lt;br&gt;&lt;/i&gt;" style="shape=internalStorage;whiteSpace=wrap;html=1;backgroundOutline=1;fontSize=12;dx=10;dy=10;fillColor=#ffe6cc;strokeColor=#d79b00;" vertex="1" parent="1">
                    <mxGeometry x="345" y="510" width="120" height="60" as="geometry"/>
                </mxCell>
                <mxCell id="88" style="edgeStyle=none;html=1;exitX=0.5;exitY=1;exitDx=0;exitDy=0;entryX=0.5;entryY=0;entryDx=0;entryDy=0;fontSize=12;strokeColor=#FF00FF;strokeWidth=2;" edge="1" parent="1" source="76" target="78">
                    <mxGeometry relative="1" as="geometry"/>
                </mxCell>
                <mxCell id="76" value="Action server&lt;br&gt;status&lt;br&gt;&lt;i&gt;dict&lt;br&gt;&lt;/i&gt;" style="shape=internalStorage;whiteSpace=wrap;html=1;backgroundOutline=1;fontSize=12;dx=10;dy=10;fillColor=#ffe6cc;strokeColor=#d79b00;" vertex="1" parent="1">
                    <mxGeometry x="1270" y="270" width="120" height="70" as="geometry"/>
                </mxCell>
                <mxCell id="86" style="edgeStyle=none;html=1;exitX=1;exitY=0.5;exitDx=0;exitDy=0;fontSize=12;strokeColor=#FF00FF;strokeWidth=2;" edge="1" parent="1" source="78" target="84">
                    <mxGeometry relative="1" as="geometry"/>
                </mxCell>
                <mxCell id="78" value="Status broadcaster&lt;br&gt;&lt;i&gt;coroutine&lt;/i&gt;" style="shape=process;whiteSpace=wrap;html=1;backgroundOutline=1;fillColor=#dae8fc;strokeColor=#6c8ebf;" vertex="1" parent="1">
                    <mxGeometry x="1270" y="380" width="120" height="60" as="geometry"/>
                </mxCell>
                <mxCell id="90" style="edgeStyle=none;html=1;exitX=1;exitY=0.5;exitDx=0;exitDy=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;fontSize=12;strokeColor=#FF00FF;strokeWidth=2;" edge="1" parent="1" source="79" target="83">
                    <mxGeometry relative="1" as="geometry"/>
                </mxCell>
                <mxCell id="79" value="Data broadcaster&lt;br&gt;&lt;i&gt;coroutine&lt;/i&gt;" style="shape=process;whiteSpace=wrap;html=1;backgroundOutline=1;fillColor=#dae8fc;strokeColor=#6c8ebf;" vertex="1" parent="1">
                    <mxGeometry x="1270" y="460" width="120" height="60" as="geometry"/>
                </mxCell>
                <mxCell id="83" value="/ws_data&lt;br&gt;&lt;i&gt;websocket&lt;/i&gt;" style="shape=hexagon;perimeter=hexagonPerimeter2;whiteSpace=wrap;html=1;fixedSize=1;fontSize=12;fillColor=#fff2cc;strokeColor=#d6b656;" vertex="1" parent="1">
                    <mxGeometry x="1420" y="470" width="120" height="40" as="geometry"/>
                </mxCell>
                <mxCell id="84" value="/ws_status&lt;br&gt;&lt;i&gt;websocket&lt;/i&gt;" style="shape=hexagon;perimeter=hexagonPerimeter2;whiteSpace=wrap;html=1;fixedSize=1;fontSize=12;fillColor=#fff2cc;strokeColor=#d6b656;" vertex="1" parent="1">
                    <mxGeometry x="1420" y="390" width="120" height="40" as="geometry"/>
                </mxCell>
                <mxCell id="102" value="&lt;h1&gt;&lt;font style=&quot;font-size: 16px;&quot;&gt;Websockets&lt;/font&gt;&lt;/h1&gt;&lt;div&gt;&lt;i&gt;helao.servers.base_api.BaseAPI&lt;/i&gt;&lt;br&gt;&lt;/div&gt;&lt;p&gt;Websockets are used for broadcasting action server status and active action data to non-critical subscribers, e.g. visualizers (&lt;i&gt;helao.servers.visualizer.gamry_vis&lt;/i&gt;)&lt;i&gt;. &lt;/i&gt;&lt;br&gt;&lt;/p&gt;" style="text;html=1;strokeColor=#666666;fillColor=#f5f5f5;spacing=5;spacingTop=-20;whiteSpace=wrap;overflow=hidden;rounded=0;strokeWidth=1;fontSize=10;labelBackgroundColor=none;fontColor=#333333;" vertex="1" parent="1">
                    <mxGeometry x="1560" y="35" width="290" height="120" as="geometry"/>
                </mxCell>
                <mxCell id="105" style="edgeStyle=none;html=1;exitX=0.5;exitY=1;exitDx=0;exitDy=0;entryX=0.5;entryY=0;entryDx=0;entryDy=0;strokeColor=#FF00FF;strokeWidth=2;fontSize=12;" edge="1" parent="1" source="104" target="26">
                    <mxGeometry relative="1" as="geometry"/>
                </mxCell>
                <mxCell id="104" value="run_CV&lt;br&gt;executor&lt;br&gt;instance" style="rounded=1;whiteSpace=wrap;html=1;strokeWidth=1;fillColor=#f8cecc;strokeColor=#b85450;" vertex="1" parent="1">
                    <mxGeometry x="1035" y="290" width="120" height="60" as="geometry"/>
                </mxCell>
            </root>
        </mxGraphModel>
    </diagram>
</mxfile>